<template name="playerStatus">
<div class="row player-status">
  {{#if isPlaying}}
    {{> playerColor}}
    {{> playerCounts}}
    {{#if hasTerritory}}
      {{> territoryWarScreen}}
    {{else}}
      {{> dropWarScreen}}
    {{/if}}
    {{> playerMessages}}
  {{else}}
  <div class="span2">
    <button class="btn join-round">Join Round {{round}}</button>
  </div>
  {{/if}}
</div>
</template>

<template name="playerColor">
    <div class="container">
    <div class="span2">
      <div class="player-color-container">
        Your color:
        <span class="player-color" style="background-color:{{color}}"></span>
      </div>
    </div>
  </div>
</template>

<template name="playerMessages">
  <div class="player-messages-container span4">
    <h3>Your messages</h3>
    <div class="player-messages">
      {{#each messages}}
      <div class="player-message player-message-{{this.type}}">
        {{this.message}}
      </div>
      {{/each}}
    </div>
  </div>
</template>

<template name="territoryWarScreen">
  <div class="container">
    {{> attackForm}}
  </didv>
</template>

<template name="sourceSelection">
  <div class="source-selector-container war-selector">
    <select class="source-selector">
      {{#each sources}}
      <option value="{{this.id}}"
      {{#if this.selected}}selected="selected"{{/if}}
      >{{this.name}}</option>
      {{/each}}
    </select>
  </div>
</template>

<template name="targetSelection">
  <div class="target-selector-container war-selector">
    <select class="target-selector"
      {{#unless canSelect }}disabled="disabled"{{/unless}}>
      {{#each targets}}
        <option value="{{this.id}}">{{this.name}}</option>
      {{/each}}
    </select>
  </div>
</template>

<template name="attackForm">
<div class="row attack-form">
  <form class="form span3">
    <h3>Attack a region</h3>
    <div>
      <label>Source: {{source}}</label>
      {{> sourceSelection}}
    </div>
    <div>
      <label>Destination: {{destination}}</label>
      {{> targetSelection}}
    </div>
    <div>
    <label>Number of troops:
      <br/>
      <input type="attack-num-input" value="{{troops}}" />
    </label>
    </div>
    <div>
      <input type="range" class="attack-num-range"/>
    </div>
    <div>
      <input type="submit" class="btn" value="Attack!"/>
    </div>
  </form>
</div>
</template>

<template name="dropWarScreen">
  <div class="drop-war-screen span4">
    {{#if hasTroops}}
    <p>
    As you currently have no territories, you can attack any region with a minimum contingent.
    Select a territory to attack to begin, then attack.
    </p>
    <button class="btn drop-attack" {{#unless hasSelection}}disabled="disabled"{{/unless}}>
      Deploy attack.
    </button>
    {{else}}
    <p>
    You currently have no troops, so you cannot attack. You must wait for the next tick for resupply.
    </p>
    {{/if}}
  </div>
</template>

<template name="playerCounts">
  <div class="container">
    <div class="player-count span1">
      <p>Your territories:</p>
      <div class="count">
        {{regions}}
      </div>
    </div>
    <div class="player-count span1">
      <p>Troops to place:</p>
      <div class="count">
        {{floatingTroops}}
      </div>
    </div>
  </div>
</template>
